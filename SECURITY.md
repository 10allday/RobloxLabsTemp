return function()\r\n\r\nfunction ifSeleniumThenSetCookie(key, value)\r\nif false then\r\ngame:GetService("CookiesService"):SetCookieValue(key, value)\r\nend\r\nend\r\n\r\nifSeleniumThenSetCookie("SeleniumTest1", "Inside the visit lua script")\r\n\r\npcall(function() game:SetPlaceID(0) end)\r\npcall(function() game:SetUniverseId(0) end)\r\n\r\nvisit = game:GetService("Visit")\r\n\r\nlocal message = Instance.new("Message")\r\nmessage.Parent = workspace\r\nmessage.archivable = false\r\n\r\ngame:GetService("ScriptInformationProvider"):SetAssetUrl("http://assetgame.mfdlabs.com/Asset/")\r\ngame:GetService("ContentProvider"):SetThreadPool(16)\r\npcall(function() game:GetService("InsertService"):SetFreeModelUrl("http://assetgame.mfdlabs.com/Game/Tools/InsertAsset.ashx?type=fm&q=%s&pg=%d&rs=%d") end) \r\npcall(function() game:GetService("InsertService"):SetFreeDecalUrl("http://assetgame.mfdlabs.com/Game/Tools/InsertAsset.ashx?type=fd&q=%s&pg=%d&rs=%d") end)\r\nifSeleniumThenSetCookie("SeleniumTest2", "Set URL service")\r\n\r\nsettings().Diagnostics:LegacyScriptMode()\r\n\r\ngame:GetService("InsertService"):SetBaseSetsUrl("http://assetgame.mfdlabs.com/Game/Tools/InsertAsset.ashx?nsets=10&type=base")\r\ngame:GetService("InsertService"):SetUserSetsUrl("http://assetgame.mfdlabs.com/Game/Tools/InsertAsset.ashx?nsets=20&type=user&userid=%d")\r\ngame:GetService("InsertService"):SetCollectionUrl("http://assetgame.mfdlabs.com/Game/Tools/InsertAsset.ashx?sid=%d")\r\ngame:GetService("InsertService"):SetAssetUrl("http://assetgame.mfdlabs.com/Asset/?id=%d")\r\ngame:GetService("InsertService"):SetAssetVersionUrl("http://assetgame.mfdlabs.com/Asset/?assetversionid=%d")\r\n\r\npcall(function() game:GetService("SocialService"):SetFriendUrl("http://assetgame.mfdlabs.com/Game/LuaWebService/HandleSocialRequest.ashx?method=IsFriendsWith&playerid=%d&userid=%d") end)\r\npcall(function() game:GetService("SocialService"):SetBestFriendUrl("http://assetgame.mfdlabs.com/Game/LuaWebService/HandleSocialRequest.ashx?method=IsBestFriendsWith&playerid=%d&userid=%d") end)\r\npcall(function() game:GetService("SocialService"):SetGroupUrl("http://assetgame.mfdlabs.com/Game/LuaWebService/HandleSocialRequest.ashx?method=IsInGroup&playerid=%d&groupid=%d") end)\r\npcall(function() game:GetService("SocialService"):SetGroupRankUrl("http://assetgame.mfdlabs.com/Game/LuaWebService/HandleSocialRequest.ashx?method=GetGroupRank&playerid=%d&groupid=%d") end)\r\npcall(function() game:GetService("SocialService"):SetGroupRoleUrl("http://assetgame.mfdlabs.com/Game/LuaWebService/HandleSocialRequest.ashx?method=GetGroupRole&playerid=%d&groupid=%d") end)\r\npcall(function() game:GetService("GamePassService"):SetPlayerHasPassUrl("http://assetgame.mfdlabs.com/Game/GamePass/GamePassHandler.ashx?Action=HasPass&UserID=%d&PassID=%d") end)\r\npcall(function() game:GetService("MarketplaceService"):SetProductInfoUrl("https://api.mfdlabs.com/marketplace/productinfo?assetId=%d") end)\r\npcall(function() game:GetService("MarketplaceService"):SetDevProductInfoUrl("https://api.mfdlabs.com/marketplace/productDetails?productId=%d") end)\r\npcall(function() game:GetService("MarketplaceService"):SetPlayerOwnsAssetUrl("https://api.mfdlabs.com/ownership/hasasset?userId=%d&assetId=%d") end)\r\npcall(function() game:SetCreatorID(0, Enum.CreatorType.User) end)\r\n\r\nifSeleniumThenSetCookie("SeleniumTest3", "Set creator ID")\r\n\r\npcall(function() game:SetScreenshotInfo("") end)\r\npcall(function() game:SetVideoInfo("") end)\r\n\r\nfunction registerPlay(key)\r\nif true and game:GetService("CookiesService"):GetCookieValue(key) == "" then\r\ngame:GetService("CookiesService"):SetCookieValue(key, "{\"userId\" : 0, \"placeId\" : 0, \"os\" : \"" .. settings().Diagnostics.OsPlatform .. "\"}")\r\nend\r\nend\r\n\r\npcall(function()\r\nregisterPlay("rbx_evt_ftp")\r\ndelay(60\*5, function() registerPlay("rbx_evt_fmp") end)\r\nend)\r\n\r\nifSeleniumThenSetCookie("SeleniumTest4", "Exiting SingleplayerSharedScript")\r\n\r\npcall(function() settings().Rendering.EnableFRM = true end)\r\npcall(function() settings()["Task Scheduler"].PriorityMethod = Enum.PriorityMethod.AccumulatedError end)\r\n\r\ngame:GetService("ChangeHistoryService"):SetEnabled(false)\r\npcall(function() game:GetService("Players"):SetBuildUserPermissionsUrl("http://assetgame.mfdlabs.com//Game/BuildActionPermissionCheck.ashx?assetId=0&userId=%d&isSolo=true") end)\r\n\r\nworkspace:SetPhysicsThrottleEnabled(true)\r\n\r\nlocal addedBuildTools = false\r\nlocal screenGui = game:GetService("CoreGui"):FindFirstChild("mfdlabsGui")\r\n\r\nlocal inStudio = false or false\r\n\r\nfunction doVisit()\r\nmessage.Text = "Loading Game"\r\nif false then\r\nif false then\r\nsuccess, err = pcall(function() game:Load("") end)\r\nif not success then\r\nmessage.Text = "Could not teleport"\r\nreturn\r\nend\r\nend\r\nelse\r\nif false then\r\ngame:Load("")\r\npcall(function() visit:SetUploadUrl("") end)\r\nelse\r\npcall(function() visit:SetUploadUrl("") end)\r\nend\r\nend\r\n\r\nmessage.Text = "Running"\r\ngame:GetService("RunService"):Run()\r\n\r\nmessage.Text = "Creating Player"\r\nif false or false then\r\nplayer = game:GetService("Players"):CreateLocalPlayer(0)\r\nif not inStudio then\r\nplayer.Name = [====[Guest 6055]====]\r\nend\r\nelse\r\nplayer = game:GetService("Players"):CreateLocalPlayer(0)\r\nend\r\nplayer.CharacterAppearance = "http://assetgame.mfdlabs.com/Asset/CharacterFetch.ashx?userId=1&placeId=0"\r\nlocal propExists, canAutoLoadChar = false\r\npropExists = pcall(function() canAutoLoadChar = game.Players.CharacterAutoLoads end)\r\n\r\nif (propExists and canAutoLoadChar) or (not propExists) then\r\nplayer:LoadCharacter()\r\nend\r\n\r\nmessage.Text = "Setting GUI"\r\nplayer:SetSuperSafeChat(true)\r\npcall(function() player:SetUnder13(True) end)\r\npcall(function() player:SetMembershipType(None) end)\r\npcall(function() player:SetAccountAge(0) end)\r\n\r\nif not inStudio and false then\r\nmessage.Text = "Setting Ping"\r\nvisit:SetPing("http://assetgame.mfdlabs.com/Game/ClientPresence.ashx?version=old&PlaceID=0", 120)\r\n\r\nmessage.Text = "Sending Stats"\r\ngame:HttpGet("")\r\nend\r\n\r\nend\r\n\r\nsuccess, err = pcall(doVisit)\r\n\r\nif not inStudio and not addedBuildTools then\r\nlocal playerName = Instance.new("StringValue")\r\nplayerName.Name = "PlayerName"\r\nplayerName.Value = player.Name\r\nplayerName.mfdlabsLocked = true\r\nplayerName.Parent = screenGui\r\n\r\npcall(function() game:GetService("ScriptContext"):AddCoreScript(59431535,screenGui,"BuildToolsScript") end)\r\naddedBuildTools = true\r\nend\r\n\r\nif success then\r\nmessage.Parent = nil\r\nelse\r\nprint(err)\r\nif not inStudio then\r\nif false then\r\npcall(function() visit:SetUploadUrl("") end)\r\nend\r\nend\r\nwait(5)\r\nmessage.Text = "Error on visit: " .. err\r\nif not inStudio then\r\nif false then\r\ngame:HttpPost("https://api.mfdlabs.com/Error/Lua.ashx", "Visit.lua: " .. err)\r\nend\r\nend\r\nend\r\nend
